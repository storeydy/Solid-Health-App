<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <title>Solid Health App</title>
  <script defer src="./index.js"></script>
  <link rel="stylesheet" href="my-demo.css" />
</head>

<body style="background-color: #b0dcff;">
  <div>
    <header style="background-color: #1c93ed; border: 2%; border-color: black;">
      <div class="row">
        <h2 style="padding-left: 40%;">Solid Health App</h2>
        <h4 </div>
    </header>
    <section id="login" class="panel">
      <div id="loginButtonDiv" class="row">
        <label id="labelLogin" for="btnLogin">1. Click the button to log into
          <span id="solid_identity_provider">...provided by the JavaScript code...</span>:
        </label>
        <button name="btnLogin" id="btnLogin">Login</button>
      </div>
      <button name="btnLogout" id="btnLogout" class="orange-button" style="display:none; float:right;">Logout</button>
      <p id="labelStatus" class="labelStatus"></p>
    </section>

    <div id="accessingPod" class="podSelector" style="display: none;">
      <form id="accessPodForm">
        <h3> Choose the Solid pod that you would like to access: </h3>
        <div class="row">
          <button id="myPodButton" style="position: inherit; left: 20%; font-size: 15px;"> Access my
            pod</button>
          <div class="row" style="align-content: center;">
            <h3 style="position: inherit; left:35%; max-width: max-content;"> OR</h3>
            <h4 style="position: inherit; left:45%; max-width: max-content;"> The pod belonging to: </h4>
            <input type="url" id="podOwner" placeholder="Enter WebID of Patient pod" size=40
              style="position: inherit; left:60%">
            <button id="otherUserPodButton" style="position: inherit; left:65%"> Submit </button>
          </div>
        </div>
      </form>
      <form id = "accessHealthDataForm" style="display: none" class = "row">
        <h3> Choose the type of Health Data in the designated pod that you would like to access: </h3>
        <input type = "button" value = "public" class="light-blue-button column-5" id = "publicButton" disabled = "true">
        <input type = "button" value = "private" class="light-blue-button column-5" id = "privateButton" disabled = "true">
        <input type = "button" value = "GP" class="light-blue-button column-5" id = "GPButton" disabled = "true">
      </form>
    </div>

    <div id="institutionInformation" class="podSelector" style="display:none">
      <div class="row">
        <form id="institutionInformationForm">
          <h3 id ="typeOfAccessedHealthData" class = "section-header"></h3>
          <h3 id="ownerOfPod"></h3>
          <h3 id="nameOfInstitution"></h3>
          <h3 id="addressOfInstitution"></h3>
          <button type="submit" class="white-button column-5" style="margin: 2%;"> Cancel session with current pod owner
          </button>
        </form>
        <form id="registerNewAppointmentForm">
          <button type="submit" class="white-button column-5" id="registerNewAppointmentButton" style="margin: 2%;">
            Register new appointment</button>
        </form>
        <form id="accessMedicalRecordsForm">
          <button type="submit" class="white-button column-5" id="accessMedicalRecordsButton" style="margin: 2%;">
            Access medical records </button>
        </form>
        <form id="uploadMedicalRecordsForm">
          <button type="submit" class="white-button column-5" id="uploadMedicalRecordsButton" style="margin: 2%;">
            Upload medical records </button>
        </form>
      </div>
      <div class = "row">
        <button class = "white-button column-5" id = "initiateInsuranceRequestButton" style = "margin: 2%;">Make insurance request</button>
        <!-- <button class = "white-button column-5" id = "viewInsuranceDiagnosesButton" style = "margin: 2%;">View pertinent diagnoses for insurance</button> -->

      </div>
    </div>

    <div id="noInstitutionInformation" style="display:none">
      <form id="noInstitutionInformationForm">
        <!-- <label id = "currentPlace">  </label> -->
        <h2> There is currently no registered medical institution in your pod, click below to add one </h2>
        <button type="submit"> Register new medical institution </button>
      </form>
    </div>

    <div id="registerNewMedicalInstitution" style="display:none" class = "panel">
      <form id="newMedicalInstitutionForm">
        <h2 class = "section-header" style="text-align: center; margin-top: 5%;"> Register new medical institution </h2>
        <div class="row newField">
          <label id="institutionTypeLabel"> Type of medical institution: </label>
          <select name = "institutionType" id = "institutionType">
            <option value = "public"> Public </option>
            <option value = "private"> Private </option>
            <option value = "GP">General Practitioner (GP)</option>
          </select>
        </div>
        <div class="row newField">
          <label id="institutionNameLabel"> Name of medical institution: </label>
          <input type="text" id="institutionName" placeholder="Enter name of new medical institution" size=70 required>
        </div>
        <div class="row newField">
          <label id="institutionAddressLabel"> Address of medical institution: </label>
          <input type="text" id="institutionAddress" placeholder="Enter address of new medical institution" size=70 required>
        </div>
        <div class="row newField">
          <label id="institutionSysAdminLabel"> WebID of medical institution administrator (optional): </label>
          <input type="url" id="institutionSysAdmin" placeholder="Enter webID of medical institution administrator"
            size=70 value="">
          <p><b> Note: The individual associated with this WebID will be able to organise appointments on your behalf
              and grant other users access to your health records, so it is important to ensure that the correct WebID
              is entered </b></p>
        </div>
        <button type="submit" class = "green-button"> Save institution details to pod </button>
        <button type="reset" id = "cancelRegisterNewInsitutionButton" class = "red-button"> Cancel changes </button>
      </form>
    </div>

    <div id="uploadNewAppointmentDetails" class="panel" style="display: none;">
      <button id="returnFromUploadingAppointment" class="red-button"
        style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
      <h2 style="text-align: center;"> Upload new appointment details </h2>
      <div class="row">
        <label class="column-4" style="font-size: 2vh;"> Department of appointment: </label>
        <form class="column-4" id="selectedDepartmentForm">
          <div class="dropdown">
            <button type="submit" class="dropbtn" id="departmentDropdownButton">Select a department</button>
            <div id="myDropdown" class="dropdown-content">
              <input type="text" placeholder="Search.." id="selectedAppointmentDepartmentDropdown"
                onkeyup="filterFunction()">
            </div>
          </div>
        </form>
      </div>
      <form id="saveNewAppointmentDetailsForm">
        <div class="row">
          <label class="column-6"> Time of appointment: </label>
          <input class="column-6" type="text" placeholder="hh:mm (24hr)" id="newAppointmentTime" required
            pattern="[0-9][0-9]:[0-5][0-9]" required minlength="5" maxlength="5">
          <input class="column-6" style="float:right" type="text" placeholder="dd/mm/yy" id="newAppointmentDate"
            required pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required minlength="8" maxlength="8">
          <label class="column-6" style="float:right"> Date of appointment: </label>
        </div>
        <div class="row">
          <label class="column-4"> WebID of Health worker conducting appointment: </label>
          <input class="column-4" type="url" placeholder="Enter Doctor's WebID" id="newAppointmentDoctor" required>
          <textarea class="column-6" style="float:right; resize: none;" cols="40" rows="5"
            placeholder="Enter any notes relevant to the appointment" id="newAppointmentNotes"></textarea>
          <label class="column-6" style="float:right"> Notes: </label>
        </div>
        <button type="submit" class="green-button" id="saveAppointmentDetailsButton"> Save Appointment Details to pod
        </button>
      </form>
    </div>

    <div id="accessingRecordsDiv" class="panel" style="display:none">
      <button id="returnFromAccessingRecords" class="red-button"
        style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go
        back </button>
      <form id="departmentSelectionForm">
        <h2 style="text-align: center; margin-top: 5%;"> Select a department to access record types within that department, or manage the access to it </h2>
      </form>
      <!-- <div id = "displayMedicalRecordsDiv" class = "panel" s> -->
      <button id = "viewAccessButton" class = "light-blue-button" style="width: 200px"> Manage access to selected dataset </button>

    </div>
  </div>

  <div id="uploadNewMedicalRecordDiv" class="panel" style="display:none">
    <button id="returnFromUploadingMedicalRecord" class="red-button"
      style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
    <h2 style="text-align: center;">Upload new medical record to selected user's pod </h2>
    <div id="medicalRecordTypeSelection">
      <div class="row">
        <h5> Select a record type to upload. Hover over options for more details. </h5>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Diagnosis" id="diagnosisCheckbox"
            onclick="disableOtherCheckboxes('recordCheckbox', 'prescriptionCheckbox')">
          <label title="Medical record containing details of a diagnosis that has been reached from test results"
            for="diagnosisCheckbox" style="margin-right: 2%;"> Diagnosis </label>
        </div>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Prescription" id="prescriptionCheckbox"
            onclick="disableOtherCheckboxes('diagnosisCheckbox', 'recordCheckbox')">
          <label
            title="Medical record containing details of prescribed medication for the owner of the currently accessed pod"
            for="prescriptionCheckbox" style="margin-right: 2%;"> Prescription </label>
        </div>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Record" id="recordCheckbox"
            onclick="disableOtherCheckboxes('diagnosisCheckbox', 'prescriptionCheckbox')">
          <label
            title="Medical record containing details of notes from a recent appointment or other encounter with a Health Worker"
            for="recordCheckbox" style="margin-right: 2%;"> General Record </label>
        </div>
      </div>
      <button id="continueWithSelectedRecordTypeButton" class="light-blue-button"> Continue </button>
    </div>
    <form id="newGeneralRecordForm">
      <div id="createNewGeneralRecordDiv" style="display:none">
        <h5> Record type: <u>General Record</u></h5>
        <div class="row" id="newGeneralRecordDateAndDepartment">
          <label class="column-6">Date of record: </label>
          <input class="column-6" placeholder="dd/mm/yy" required pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required
            minlength="8" maxlength="8" id="generalRecordDate">
          <div id="newRecordDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
        </div>
        <div class="row">
          <label class="column-6">Title of record: </label>
          <input class="column-3" placeholder="Enter a title" required id="generalRecordTitle">
        </div>
        <div class="row">
          <label class="column-6"> Description of record: </label>
          <textarea class="column-3" style="resize:none" required placeholder="Enter a description" cols="80" rows="10"
            id="newGeneralRecordDescription"></textarea>
        </div>
        <button type="submit" class="green-button" id="saveGeneralRecordDetailsButton"> Save general record details to
          pod </button>
      </div>
    </form>
    <form id="newPrescriptionForm">
      <div id="createNewPrescriptionDiv" style="display:none">
        <h5> Record type: <u>Prescription</u></h5>
        <div class="row" id="newPrescriptionDateAndDepartment">
          <label class="column-6">Title of prescription: </label>
          <input class="column-3" placeholder="Enter a title" required id="prescriptionTitle">
          <div id="newPrescriptionDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
        </div>
        <div class="row">
          <label class="column-6">Start date of prescription: </label>
          <input class="column-6" placeholder="dd/mm/yy" required pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required
            minlength="8" maxlength="8" id="prescriptionStartDate">
          <input style="float:right" class="column-6" placeholder="dd/mm/yy" required
            pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required minlength="8" maxlength="8" id="prescriptionEndDate">
          <label style="float:right" class="column-6">End date of prescription: </label>
        </div>
        <div class="row">
          <label class="column-6"> Description of prescription: </label>
          <textarea class="column-3" style="resize:none" required placeholder="Enter a description" cols="80" rows="10"
            id="newPrescriptionDescription"></textarea>
          <input style="float:right" type="url" value="" class="column-6" placeholder="Enter a pharmacist WebID" id="prescriptionPharmacist">
          <label style="float:right" class="column-6">Pharmacist to fill prescription (optional):  </label>
        </div>
        <button type="submit" class="green-button" id="savePrescriptionDetailsButton"> Save prescription details to
          pod </button>
      </div>
    </form>
    <form id="newDiagnosisForm">
      <div id="createNewDiagnosisDiv" style="display:none">
        <h5> Record type: <u>Diagnosis</u></h5>
        <div class="row" id="newDiagnosisDateAndDepartment">
          <label class="column-6">Title of diagnosis: </label>
          <input class="column-3" placeholder="Enter a title" required id="diagnosisTitle">
          <div id="newDiagnosisDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
        </div>
        <div class="row">
          <label class="column-6">Date of diagnosis: </label>
          <input class="column-6" placeholder="dd/mm/yy" required pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required
            minlength="8" maxlength="8" id="diagnosisDate">
          <!-- <input style="float:right" class="column-6" placeholder="dd/mm/yy" required pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" required
            minlength="8" maxlength="8" id="prescriptionEndDate">
          <label style="float:right" class="column-6">End date of prescription: </label> -->
        </div>
        <div class="row">
          <label class="column-6"> Description of diagnosis: </label>
          <textarea class="column-3" style="resize:none" required placeholder="Enter a description" cols="80" rows="10"
            id="newDiagnosisDescription"></textarea>
        </div>
        <button type="submit" class="green-button" id="saveDiagnosisDetailsButton"> Save Diagnosis details to
          pod </button>
      </div>
    </form>
  </div>

  <div id = "insuranceDiv" class = "panel" style = "display: none">
    <button id="returnFromInsurance" class="red-button"
    style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
    <h2 class = "section-header" style="text-align: center; margin-top: 5%;">Share medical records for health/life insurance</h2>
    <h4>In order to get a quote for life insurance, insurance companies must be aware of any ongoing health conditions of the insured. <br><br>
      This is done by a process called underwriting, and it determines how much of a risk the individual is to cover. <br><br>
       By using this feature you will be providing all of the required data to a specified insurer, including any diagnoses dated in the last 5 years from the following departments:</h4>
       <ul>
         <li>Cardiology</li>
         <li>Oncology</li>
         <li>Haematology</li>
         <li>Oncology</li>
         <li>Psychiatry</li>
         <li>Rheumatology</li>
       </ul>
      <h4><br><br>Enter below the WebID of the insurer, which will allow them to view these records that are stored in your pod. </h4>
      <input type = "url" placeholder="Insurer WebID" id = "insurerWebID">
       <button id = "submitInsuranceRequestButton" style="margin-left:70px" class = "green-button">Submit </button>
  </div>

  <script>
    function disableOtherCheckboxes(checkboxToDisable1, checkboxToDisable2) {
      document.getElementById(checkboxToDisable1).disabled = !(document.getElementById(checkboxToDisable1).disabled)
      document.getElementById(checkboxToDisable2).disabled = !(document.getElementById(checkboxToDisable2).disabled)
    }
  </script>
  <!-- <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
        <script src="healthCareDepartmentDropdown.js"></script> -->



  <div id="authenticatedOperations" style="display: none;">

    <div id="read" class="panel">
      <div class="row">
        <form id="writeForm">
          <label id="writelabel" for="name">2. Create a new Solid Dataset: </label>
          <button type="submit">
            Create Dataset
          </button>
        </form>
      </div>

      <dl class="display">
        <dt>Writing status:&nbsp</dt>
        <dd id="labelWriteStatus" class="labelStatus">...not written yet...</dd>
      </dl>
    </div>

    <div id="createAcl" class="panel">
      <div class="row">
        <form id="createAclForm">
          <label id="createAclLabel" for="webID">3. Create ACL for dataset that has been created:
          </label>
          <button type="submit" name="btnCreateAcl" id="btnCreateAcl">
            Create ACL
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>Formatted Name (FN) read from Pod:&nbsp</dt>
        <dd id="webID">...not read yet...</dd>
      </dl>
    </div>

    <div id="readAgent" class="panel">
      <div class="row">
        <form id="readAgentAccessForm">
          <label id="readlabel" for="webID">4. Read agent access of dataset that has been created:
          </label>
          <input type="url" id="agentID" name="agentID" size="50"
            placeholder="Enter a webID to see the access that webID has" />
          <button type="submit" name="btnRead" id="btnRead">
            Read Profile
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>Formatted Name (FN) read from Pod:&nbsp</dt>
        <dd id="labelFN">...not read yet...</dd>
      </dl>
    </div>

    <div id="read" class="panel">
      <div class="row">
        <form id="readDatasetForm">
          <label id="readlabel">4. Read back content of dataset
          </label>
          <button type="submit" name="btnReadDataset" id="btnReadDataset">
            Get dataset contents
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>File read from Pod:&nbsp</dt>
        <dd id="labelFN">...not read yet...</dd>
      </dl>
    </div>

    <div id="giveAccess" class="panel">
      <div class="row">
        <form id="giveAccessForm">
          <label id="giveAccesslabel" for="webID">5. Grant access to user for created dataset
          </label>
          <input type="url" id="granteeID" name="webID" size="50"
            placeholder="Enter any WebID to grant access to the created dataset" />
          <br>
          <input type="checkbox" id="readAccessBox">
          <label for="readAccessBox"> Read </label>
          <input type="checkbox" id="writeAccessBox">
          <label for="writeAccessBox"> Write </label>
          <input type="checkbox" id="appendAccessBox">
          <label for="appendAccessBox"> Append </label>
          <input type="checkbox" id="controlAccessBox">
          <label for="controlAccessBox"> Control </label>
          <br>
          <button type="submit" name="btnRead" id="btnRead">
            Grant Access
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>Writing access status: </dt>
        <dd id="accessStatusLabel">...not written yet...</dd>
      </dl>
      <!-- <dl class="display">
          <dt>Formatted Name (FN) read from Pod:&nbsp</dt>
          <dd id="labelFN">...not read yet...</dd>
        </dl> -->
    </div>

    <div id="read" class="panel">
      <div class="row">
        <form id="readPrivateForm">
          <label id="readlabel" for="webID">6. Read back private text file belonging to Test User 1
          </label>
          <button type="submit" name="btnReadPrivateFile" id="btnReadPrivateFile">
            Get private file
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>File read from Pod:&nbsp</dt>
        <dd id="labelFN">...not read yet...</dd>
      </dl>
    </div>

    <div id="uploadFile" class="panel">
      <div class="row">
        <form id="uploadFileForm">
          <label id="readlabel" for="webID">7. Upload new file to dataset
          </label>
          <input type="text" id="fileName" name="fileName" size="30" placeholder="Enter name of file" />
          <br>
          <br>
          <input type="text" id="fileContent" name="fileContent" size="50" placeholder="Enter file content" />
          <button type="submit" name="btnUploadPrivateFile" id="btnUploadPrivateFile">
            Upload file
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>Writing status: </dt>
        <dd id="uploadLabel">...not written yet...</dd>
      </dl>
    </div>

    <div id="deleteFile" class="panel">
      <div class="row">
        <form id="deleteFileForm">
          <label id="readlabel" for="webID">8. Delete file from dataset
          </label>
          <br>
          <br>
          <input type="url" id="fileUrl" name="fileUrl" size="50" placeholder="Enter file URL" />
          <button type="submit" name="btnDeletePrivateFile" id="btnDeletePrivateFile">
            Delete file
          </button>
        </form>
      </div>
      <dl class="display">
        <dt>Deleting status: </dt>
        <dd id="deleteLabel">...not deleted yet...</dd>
      </dl>
    </div>

    <button id="deleteDatasetButton" onclick="deleteDataset()"> Delete dataset</button>
  </div>
  </div>

  <script>
    /* When the user clicks on the button,
    toggle between hiding and showing the dropdown content */
    // function myFunction() {
    //   document.getElementById("myDropdown").classList.toggle("show");
    // }

    function filterFunction() {
      var input, filter, ul, li, a, i;
      input = document.getElementById("selectedAppointmentDepartmentDropdown");
      filter = input.value.toUpperCase();
      div = document.getElementById("myDropdown");
      a = div.getElementsByTagName("a");
      for (i = 0; i < a.length; i++) {
        txtValue = a[i].textContent || a[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          a[i].style.display = "";
        } else {
          a[i].style.display = "none";
        }
      }
    }
  </script>
</body>

</html>